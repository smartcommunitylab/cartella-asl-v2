<div class="mb-3 list-container md-margin">
    <div class="row" *ngIf="istituto">
        <div class="col-12">
            <div class="row v-center">
                <span class="title font-30 m-left2">{{istituto.name}}</span>&nbsp;&nbsp;
                <span (click)="menuContentShow()">
                    <svg *ngIf="!showContent" class="icon icon-primary icon-bg pointer">
                        <use xlink:href="assets/bootstrap-italia/svg/sprite.svg#it-help-circle"></use>
                    </svg>
                    <img *ngIf="showContent" src="assets/images/it-help-circle-FULL.svg" class="helpIcon pointer">
                </span>
            </div>
        </div>
    </div>
    <hr class="hr" />
    <div *ngIf="showContent" class="row rectangle v-center-inline">
        <div class="col-1 helpMessageIcon-mRight">
            <svg class="icon icon-sm fill-darkblue">
                <use xlink:href="assets/bootstrap-italia/svg/sprite.svg#it-info-circle"></use>
            </svg>
        </div>
        <div class="col-10 helpMessage-mLeft">
            <span>{{menuContent}}</span>
        </div>
        <div class="col-1"><svg class="icon float-right fill-darkblue pointer helpMessageClose-mRight"
                (click)="menuContentShow()">
                <use xlink:href="assets/bootstrap-italia/svg/sprite.svg#it-close-big"></use>
            </svg></div>
    </div>
    <br />
    <br />
    <div class="card-body m-16" *ngIf="istituto">
        <div class="title">
            Dati istituto <br />
            <button class="btn btn-primary v-center-inline" placement="bottom"
                ngbTooltip="Modifica i dati di questo istituto" (click)="modifica()">
                Modifica dati istituto&nbsp;&nbsp;&nbsp;<i class="material-icons">edit</i></button>
        </div>
        <br>
        <div class="p-1 middle-div row">
            <div class="col-6">
                <span class="row"><span class="text-semibold">Nome:&nbsp;</span>{{istituto.name}}</span>
                <span class="row"><span class="text-semibold">Indirizzo:&nbsp;</span>{{istituto.address}}</span>
                <span class="row"><span class="text-semibold">P.IVA/CF:&nbsp;</span>{{istituto.cf}}</span>
            </div>
            <div class="col-6">
                <span class="row"><span class="text-semibold">Telefono:&nbsp;</span>{{istituto.phone}}</span>
                <span class="row"><span class="text-semibold">PEC:&nbsp;</span>{{istituto.pec}}</span>
                <span class="row"><span class="text-semibold">Mail:&nbsp;</span>{{ istituto.email }}</span>
            </div>
        </div>
        <br />
        <br />
        <div class="row">
            <div class="title">
                Dashboard <br />
            </div>
        </div>
        <div class="row">
            <div class="form-check form-check-inline">
                <input name="gruppo2" type="radio" id="radio4" [checked]="classeReport"
                    (change)="onFilterChange($event)" checked>
                <label for="radio4">Visualizza dati classe</label>
            </div>
            <div class="form-check form-check-inline">
                <input name="gruppo2" type="radio" id="radio5" (change)="onFilterChange($event)">
                <label for="radio5">Visualizza dati istituto</label>
            </div>
        </div>
        <div class="row v-center form-group" *ngIf="classeReport">
            <div class="col-2">Seleziona classe:</div> 
            <div class="col-4">
                <select class="custom-select form-control" style="width: 300px;" [(ngModel)]="classe"
                    (ngModelChange)="selectClasseFilter()">
                    <!-- <option selected="selected">Classi</option> -->
                    <option [value]="classe" *ngFor="let classe of classi">{{classe}}</option>
                </select>
            </div>
        </div>
        <br />
        <br />
        <div class="row" *ngIf="showDashboard">
            <div class="row">
                <div class="title">
                    Tipologie Attività <br />
                </div>
            </div>
            <br/>
            <div class="col-6">
                <div class="chartjs-container">
                    <canvas  
                    width="480"
                    height="380" 
                    baseChart
                    [data]="pieChartData"
                    [labels]="pieChartLabels"
                    [chartType]="pieChartType"
                    [options]="pieChartOptions"
                    [plugins]="pieChartPlugins"
                    [colors]="pieChartColors"
                    [legend]="pieChartLegend">
                    </canvas>
                </div>
            </div>
            <div class="col-4">
                <div class="float-right">
                    <br />
                    <br />
                    <div class="row">
                        <button class="btn btn-rectangle v-center-inline rectangle-in_corso" (click)="listAttivita('in_corso')">
                            {{ numeroAttivitaInCorso }} Attività
                            <br />
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in corso&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        </button>
                    </div>
                    <br />
                    <br />
                    <div class="row">
                        <button class="btn btn-rectangle v-center-inline rectangle-da_revisionare"
                            (click)="listAttivita('revisione')">
                            {{ numeroAttivitaInRevisione }} Attività
                            <br />
                            da revisionare
                        </button>
                    </div>
                    <br />
                    <br />
                    <div class="row">
                        <button class="btn btn-rectangle v-center-inline rectangle-in_attesa" (click)="listAttivita('in_attesa')">
                            {{ numeroAttivitaInAttesa }} Attività
                            <br />
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in attesa&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <br />
        <br />
        <div *ngIf="classeReport && showDashboard">
            <div class="title">
                Ore studenti <br />
            </div>
            <div>
               <canvas baseChart
               width="1500"
               height="380" 
               [datasets]="barChartClasseData"
               [labels]="barChartClasseLabels"
               [options]="barChartClasseOptions"
               [plugins]="barChartClassePlugins"
               [legend]="barChartClasseLegend"
               [chartType]="barChartClasseType">
               </canvas>
            </div>
        </div>
        <div *ngIf="!classeReport && showDashboard">
            <div class="title">
                Media ore per classe <br />
            </div>
            <div>
                <canvas baseChart
                width="1500"
                height="380" 
                [datasets]="barChartIstitutoData"
                [labels]="barChartIstitutoLabels"
                [options]="barChartIstitutoOptions"
                [plugins]="barChartIstitutoPlugins"
                [legend]="barChartIstitutoLegend"
                [chartType]="barChartIstitutoType">
                </canvas>
            </div>
        </div>
    </div>
    <div class="row" *ngIf="!showDashboard">
        <div class="col-xl-12 text-center errorIconPaddingTop">
            <svg class="icon icon-lightGrey icon-xl">
                <use xlink:href="assets/bootstrap-italia/svg/sprite.svg#it-error"></use>
            </svg>
        </div>
        <div class="col-xl-12 text-center">
            <span class="searchError">Non ci sono dati da visualizzare!</span>
        </div>
    </div>
</div>