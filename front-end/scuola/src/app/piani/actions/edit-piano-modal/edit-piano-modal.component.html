<div class="modal-cartella">
    <div class="modal-header">
        <div class="row modal-title">
            <span>Modifica piano</span>
        </div>
        <div class="row v-center float-right">
            <button type="button" class="btn btn-danger btn-icon btn-xs" (click)="activeModal.close('Close click')">
                <span class="row">
                    <span class="v-center">Annulla&nbsp;</span>&nbsp;
                    <span>
                        <i class="material-icons">close</i>
                    </span>
                </span>
            </button>
            &nbsp;&nbsp;
            <button class="btn btn-success btn-icon btn-xs" (click)="update()">
                <span class="row">
                    <span class="v-center">Salva&nbsp;</span>&nbsp;
                    <span>
                        <i class="material-icons">save</i>
                    </span>
                </span>
            </button>
        </div>
    </div>

    <div class="modal-body">

        <div class="errorMsg" [hidden]="!forceErrorDisplay">Compila i campi necessari</div>

        <span class="row modal-title">Dati piano</span>

        <div class="row v-center form-group">Corso di studio:
            <div class="col-sm-6"
                [class.has-danger]="corsoStudioInput.invalid && (corsoStudioInput.dirty || corsoStudioInput.touched || forceErrorDisplay)">
                <select class="browser-default form-control" [(ngModel)]="piano.corsoDiStudioId" id="corsoStudio"
                    #corsoStudioInput="ngModel" required>
                    <option [value]="corsodistudio.courseId" *ngFor="let corsodistudio of corsiStudio">
                        {{corsodistudio.nome}}
                    </option>
                </select>
                <div class="invalid-feedback"
                    [class.d-block]="corsoStudioInput.value==='Corso di studio' && forceErrorDisplay">Corso di studio
                    richiesto.</div>
            </div>
        </div>

        <div class="row v-center form-group">Titolo:
            <div class="col-sm-4">
                <div
                    [class.has-danger]="titoloInput.invalid && (titoloInput.dirty || titoloInput.touched || forceErrorDisplay)">
                    <input type="text" class="form-control" [(ngModel)]="piano.titolo" id="titolo"
                        #titoloInput="ngModel" placeholder="Titolo" required>
                    <div class="invalid-feedback"
                        [class.d-block]="titoloInput.invalid && (titoloInput.dirty || titoloInput.touched || forceErrorDisplay)">
                        Titolo richiesto.</div>
                </div>
            </div>
            <div class="col-sm-2"></div>
            Monte 3º anno:
            <div class="col-sm-3"
                [class.has-danger]="monte3annoInput.invalid && (monte3annoInput.dirty || monte3annoInput.touched || forceErrorDisplay)">
                <input type="number" class="form-control" [(ngModel)]="piano.oreTerzoAnno" id="monte3anno"
                    #monte3annoInput="ngModel" placeholder="Monte ore 3º anno" required>
                <div class="invalid-feedback"
                    [class.d-block]="monte3annoInput.invalid || (forceErrorDisplay && (monte3annoInput.value <= 0))">
                    Monte 3º anno richiesto.</div>
            </div>
        </div>

        <div class="row v-center form-group">Note:
            <div class="col-sm-4">
                <input type="text" class="form-control" [(ngModel)]="piano.note" id="note" #noteInput="ngModel"
                    placeholder="Note">
            </div>
            <div class="col-sm-2"></div>&nbsp;
            Monte 4º anno:
            <div class="col-sm-3"
                [class.has-danger]="monte4annoInput.invalid && (monte4annoInput.dirty || monte4annoInput.touched || forceErrorDisplay)">
                <input type="number" class="form-control" [(ngModel)]="piano.oreQuartoAnno" id="monte4anno"
                    #monte4annoInput="ngModel" placeholder="Monte ore 4º anno" required>
                <div class="invalid-feedback"
                    [class.d-block]="monte4annoInput.invalid || (forceErrorDisplay && (monte4annoInput.value <= 0))">
                    Monte 4º anno richiesto.</div>
            </div>
        </div>

        <div class="row v-center form-group">
            Totale ore:
            <div class="col-sm-2">{{piano.oreQuartoAnno + piano.oreTerzoAnno + piano.oreQuintoAnno}}</div>
            <div class="col-sm-3"></div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            Monte 5º anno:
            <div class="col-sm-3"
                [class.has-danger]="monte5annoInput.invalid && (monte5annoInput.dirty || monte5annoInput.touched || forceErrorDisplay)">
                <input type="number" class="form-control" [(ngModel)]="piano.oreQuintoAnno" id="monte5anno"
                    #monte5annoInput="ngModel" placeholder="Monte ore 5º anno" required>
                <div class="invalid-feedback"
                    [class.d-block]="monte5annoInput.invalid || (forceErrorDisplay && (monte5annoInput.value <= 0))">
                    Monte 5º anno richiesto.</div>
            </div>
        </div>

        <div class="row v-center form-group">
            <div class="col-sm-5">
                <label for="annoRiferimento" class="active">Anno riferimento</label>
                <input disabled type="text" id="annoRiferimento" class="form-control bg-transparent"
                    value="{{annoRiferimento}}">
            </div>
        </div>
    
    </div>