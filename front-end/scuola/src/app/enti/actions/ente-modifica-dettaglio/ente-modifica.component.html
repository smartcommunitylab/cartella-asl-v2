<div class="mb-3 list-container md-margin sub-navbar-content-below m16">
    <div class="row" *ngIf="ente">
        <div class="col-6 v-center">
            <span class="modifyTitleStyle m-left">{{ente.nome}}</span>&nbsp;&nbsp;
        </div>
        <div class="col-6">
            <div class="row v-center float-right">
                <button type="button" class="btn btn-danger btn-icon btn-xs" placement="bottom"
                    ngbTooltip="Annulla le modifiche" (click)="cancel()">
                    <span class="row modalButtonTextStyle">
                        <span class="v-center">Annulla&nbsp;</span>&nbsp;
                        <span>
                            <i class="material-icons">close</i>
                        </span>
                    </span>
                </button>
                &nbsp;&nbsp;
                <button class="btn btn-success btn-icon btn-xs" placement="bottom" ngbTooltip="Modifica l'attivitÃ "
                    (click)="save(myForm)">
                    <span class="row modalButtonTextStyle">
                        <span class="v-center">Salva&nbsp;</span>&nbsp;
                        <span>
                            <i class="material-icons">save</i>
                        </span>
                    </span>
                </button>
            </div>
        </div>
    </div>
    <hr class="hr modifyHr" />
    <div class="row m-subNav">
        <div class="col-12">
            <sub-navbar [breadcrumbItems]="breadcrumbItems"></sub-navbar>
        </div>
    </div>
    <div class="card-body modify-card-body" *ngIf="ente">
        <div class="errorMsg" [hidden]="!forceErrorDisplay">Compila i campi necessari</div>
        <span class="row v-center modal-title modalSubject">Dati Ente</span>
        <div class="row m16">
            <div class="col-12">
                <div class="row v-center form-group">
                    <div class="col-sm-5"
                        [class.has-danger]="NomeInput.invalid && (NomeInput.dirty || NomeInput.touched || forceErrorDisplay)">
                        <input type="text" class="form-control" [(ngModel)]="ente.nome" id="nome" #NomeInput="ngModel"
                            placeholder="Nome" required>
                        <div class="invalid-feedback"
                            [class.d-block]="NomeInput.invalid && (NomeInput.dirty || NomeInput.touched || forceErrorDisplay)">
                            Campo necessario.</div>
                    </div>
                    <div class="col-2"></div>
                    <div class="col-sm-5"
                        [class.has-danger]="EmailInput.invalid && (EmailInput.dirty || EmailInput.touched || forceErrorDisplay)">
                        <input type="text" class="form-control" [(ngModel)]="ente.email" id="email"
                            #EmailInput="ngModel" placeholder="Email">
                    </div>
                </div>
                <div class="row v-center form-group">
                    <div class="col-sm-5"
                        [class.has-danger]="partitaIvaInput.invalid && (partitaIvaInput.dirty || partitaIvaInput.touched || forceErrorDisplay)">
                        <input type="text" minlength="11" maxlength="11" class="form-control"
                            [(ngModel)]="ente.partita_iva" id="partitaIva" #partitaIvaInput="ngModel"
                            placeholder="Partita Iva" required>
                        <div class="invalid-feedback"
                            [class.d-block]="partitaIvaInput.invalid && (partitaIvaInput.dirty || partitaIvaInput.touched || forceErrorDisplay)">
                            Campo necessario.</div>
                    </div>
                    <div class="col-sm-2"></div>
                    <div class="col-sm-5"
                        [class.has-danger]="PECInput.invalid && (PECInput.dirty || PECInput.touched || forceErrorDisplay)">
                        <input type="text" class="form-control" [(ngModel)]="ente.pec" id="pec" #PECInput="ngModel"
                            placeholder="PEC">
                    </div>
                </div>
                <div class="row v-center form-group">

                    <div class="col-sm-5"
                        [class.has-danger]="idTipoAziendaInput.invalid && (idTipoAziendaInput.dirty || idTipoAziendaInput.touched || forceErrorDisplay)">
                        <select class="form-control custom_select" [(ngModel)]="ente.idTipoAzienda" id="idTipoAzienda"
                            #idTipoAziendaInput="ngModel" required>
                            <option selected="selected">Tipo</option>
                            <option *ngFor="let tipo of tipoAzienda" [ngValue]="tipo.id">{{tipo.value}}</option>
                        </select>
                        <div class="invalid-feedback"
                            [class.d-block]="idTipoAziendaInput.value==='Tipo' && forceErrorDisplay">
                            Campo necessario.</div>
                    </div>

                    <div class="col-2"></div>
                    <div class="col-sm-5"
                        [class.has-danger]="TelefonoInput.invalid && (TelefonoInput.dirty || TelefonoInput.touched || forceErrorDisplay)">
                        <input type="text" class="form-control" [(ngModel)]="ente.phone" id="phone"
                            #TelefonoInput="ngModel" placeholder="Telefono">
                    </div>
                </div>

                <div class="row v-center form-group">
                    <div class="col-5">
                        <ng-template #rtAddress let-place="result" let-term="term">
                            <div class="row">
                                <ngb-highlight [result]="place.name" [term]="term"></ngb-highlight>
                            </div>
                        </ng-template>
                        <input type="text" class="form-control" [(ngModel)]="place" value="place.name"
                            id="luogoSvolgimento" [ngbTypeahead]="getAddresses" [resultTemplate]="rtAddress"
                            [inputFormatter]="formatterAddress" (ngModelChange)="selectPlace(place)">
                        <label for="luogoSvolgimento" *ngIf="ente.address" class="active">Indirizzo</label>
                        <label for="luogoSvolgimento" *ngIf="!ente.address">Indirizzo</label>
                    </div>
                </div>

            </div>
        </div>
        <br>
        <div class="p-1 middle-div row">
            <div class="col">
                <div id="map" style="height:300px;width:100%;"></div>
            </div>
        </div>

    </div>
</div>